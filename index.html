<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Carpenters</title>
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/css/main.css">
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/css/logger.css">
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/css/settings.css">
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/css/manual_mint.css">
    <link rel="stylesheet" type="text/css" href="assets/stylesheets/css/font-awesome.min.css">

    <script>
      window.$ = window.jQuery = require('jquery');
      var fs = require('fs');

      $(document).ready(function(){
        initSettings();
        if ( process.platform !== 'darwin' ) {
          $('#logger-save-button').css('padding-right', '35px');
        }
      });
    </script>
    <script type="text/javascript" src="assets/javascript/settings.js"></script>
    <script type="text/javascript" src="assets/javascript/file_handler.js"></script>
    <script type="text/javascript" src="assets/javascript/metadata_reader.js"></script>
    <script type="text/javascript" src="assets/javascript/writer.js"></script>
    <script type="text/javascript" src="assets/javascript/logger.js"></script>
    <script type="text/javascript" src="assets/javascript/manual_mint.js"></script>
    
  </head>
  <body>
    <div id="container">
      <div id="settings-button" onclick="displaySettings()">
        <i class="fa fa-cog" aria-hidden="true"></i>
      </div>

      <div id="dnd">
        <div class="dnd-prompt">Drop XLSX preservation file here or <a href="#" onclick="openFile()">open file</a></div>
      </div>

      <div id="controller">
        <div class="btn-group">
          <button class="btn btn-action on automint" onclick="toggleMinter()">Auto Mint: <span class="status">on</span></button>
          <button class="btn btn-action" onclick="rollback()">Roll Back</button>
          <button class="btn btn-action" onclick="displayMinter()">Mint Ark</button>
          <button class="btn btn-action" onclick="editArk()">Edit Ark</button>
        </div>
      </div>
      
      <div id="logger-display">
        <ul class="logger-display-list">
        </ul>
      </div>
      <div id="logger-save-button" onclick="logger.save()"><i class="fa fa-floppy-o" aria-hidden="true"></i> Save Log</div>

      <div id="minter" class="modal">
        <div class="modal-content">
          <div class="display">
            <form id="minter-form">
              <h2>ERC</h2>
              <div class="input-group">
                <label for="minter_erc_who">Who</label>
                <input type="text" id="minter_erc_who" name="minter_erc_who" />
              </div>
              <div class="input-group">
                <label for="minter_erc_what">What</label>
                <input type="text" id="minter_erc_what" name="minter_erc_what" />
              </div>
              <div class="input-group">
                <label for="minter_erc_when">When</label>
                <input type="text" id="minter_erc_when" name="minter_erc_when" />
              </div>
              <div class="input-group">
                <label for="minter_erc_where">Where</label>
                <input type="text" id="minter_erc_where" name="minter_erc_where" />
                <p>Use $ark$ in place of a ARK identifier</p>
              </div>
            </form>
            <div class="input-buttons">
              <button type="button" class="btn btn-default" onclick="closeMinter();">Cancel</button>
              <button type="button" class="btn btn-action" onclick="mintArk();">Mint</button>
            </div>
          </div>
          <div class="loading">
            <h2>Generating ARK</h2>
            <p><i class="fa fa-spin fa-circle-o-notch" aria-hidden="true"></i></p>
          </div>
          <div class="response">
            <div class="content">
              <h2>ARK Created</h2>
              <div class="input-group">
                <input id="ark_identifier" type="text" />
                <div class="input-buttons" title="Copy to clipboard">
                  <button class="minter-btn" onclick="minterCopyToClipboard('#ark_identifier')">
                    <img src="assets/images/clippy.svg" />
                  </button>
                </div>
              </div>
              <div class="erc">
                erc: <br />
                who: <span class="who"></span><br />
                what: <span class="what"></span><br />
                when: <span class="when"></span><br />
                where: <span class="where"></span><br />
              </div>
            </div>
            <div class="input-buttons">
              <button type="button" class="btn btn-action" onclick="closeMinter();">Ok</button>
            </div>
          </div>
        </div>
      </div>

      <div id="editor" class="modal">
        <div class="modal-content">
          <div class="getter">
            <h2>ARK</h2>
            <div class="input-group">
              <input id="edit_ark_identifier" type="text" placeholder="ARK identifier to edit" />
            </div>
            <div class="input-buttons">
              <button type="button" class="btn btn-default" onclick="closeArkEditor();">Cancel</button>
              <button type="button" class="btn btn-action" onclick="getArk();">Ok</button>
            </div>
          </div>
          <div class="loading">
            <h2>Getting ARK information</h2>
            <p><i class="fa fa-spin fa-circle-o-notch" aria-hidden="true"></i></p>
          </div>
          <div class="edit">
             <form id="editor-form">
              <h2>ERC</h2>
              <input type="hidden" id="editor_ark" />
              <div class="input-group">
                <label for="editor_erc_who">Who</label>
                <input type="text" id="editor_erc_who" name="editor_erc_who" />
              </div>
              <div class="input-group">
                <label for="editor_erc_what">What</label>
                <input type="text" id="editor_erc_what" name="editor_erc_what" />
              </div>
              <div class="input-group">
                <label for="editor_erc_when">When</label>
                <input type="text" id="editor_erc_when" name="editor_erc_when" />
              </div>
              <div class="input-group">
                <label for="meditor_erc_where">Where</label>
                <input type="text" id="editor_erc_where" name="editor_erc_where" />
              </div>
            </form>
            <div class="input-buttons">
              <button type="button" class="btn btn-default" onclick="closeArkEditor();">Cancel</button>
              <button type="button" class="btn btn-action" onclick="saveArk();">Save</button>
            </div>
          </div>
          <div class="saving">
            <h2>Saving ARK information</h2>
            <p><i class="fa fa-spin fa-circle-o-notch" aria-hidden="true"></i></p>
          </div>
        </div>
      </div>

      <div id="settings" class="modal">
        <div class="modal-content">
          <form id="settings-form">
            <input type="checkbox" style="display: none" id="mint_arks" />
            <div class="input-group">
              <label for="mint_url">Mint URL</label>
              <input type="text" id="mint_url" name="mint_url" />
            </div>
            <div class="input-group">
              <label for="update_url">Update URL</label>
              <input type="text" id="update_url" name="update_url" />
            </div>
            <div class="input-group">
              <label for="api_key">API Key</label>
              <input type="text" id="api_key" name="api_key" />
            </div>
            <div class="input-group">
              <label for="erc_who">ERC Who</label>
              <input type="text" id="erc_who" name="erc_who" />
            </div>
            <div class="input-group">
              <label for="erc_where">ERC Where</label>
              <input type="text" id="erc_where" name="erc_where" />
              <p>Use $ark$ in place of a ARK identifier</p>
            </div>
          </form>
          <div class="input-buttons">
            <button type="button" class="btn btn-default" onclick="closeSettings();">Cancel</button>
            <button type="button" class="btn btn-action" onclick="saveSettings()">Save Changes</button>
          </div>
        </div>
      </div>

      <div id="processark" class="modal">
        <div class="modal-content">
          <h2>ARK Identifier</h2>
          <div class="input-group">
            <input id="process_ark_identifier" type="text" placeholder="ARK identifier to use or leave blank" />
          </div>
          <div class="input-buttons">
            <button type="button" class="btn btn-action" onclick="processWithArk();">Ok</button>
          </div>
        </div>
      </div>

    </div>
  </body>
</html>